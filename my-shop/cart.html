<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Корзина | Мыльная фантазия</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">Мыльная фантазия</div>
            <nav>
                <ul>
                    <li><a href="index.html">Главная</a></li>
                    <li><a href="products/all.html">Товары</a></li>
                    <li><a href="cart.html" class="active">Корзина (<span class="cart-count">0</span>)</a></li>
                    <li><a href="orders.html">Мои заказы</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="cart-page">
        <style>/* Стили для страницы корзины */
.cart-page {
    padding: 40px 0;
}

.cart-items {
    background: var(--card-bg);
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
}

.cart-item {
    display: flex;
    gap: 20px;
    padding: 20px 0;
    border-bottom: 1px solid var(--border-color);
    align-items: center;
}

.cart-item:last-child {
    border-bottom: none;
}

.cart-item-image {
    width: 100px;
    height: 100px;
    background-color: var(--image-placeholder);
    border-radius: 8px;
    overflow: hidden;
    flex-shrink: 0;
}

.cart-item-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.cart-item-info {
    flex-grow: 1;
}

.cart-item-title {
    font-size: 18px;
    color: var(--primary-color);
    margin-bottom: 5px;
}

.cart-item-price {
    font-weight: 600;
    color: var(--secondary-color);
    margin-bottom: 10px;
}

.cart-item-actions {
    display: flex;
    align-items: center;
    gap: 10px;
}

.quantity-control {
    display: flex;
    align-items: center;
    border: 1px solid var(--border-color);
    border-radius: 4px;
}

.quantity-btn {
    width: 30px;
    height: 30px;
    background: none;
    border: none;
    font-size: 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-color);
}

.quantity-value {
    width: 40px;
    text-align: center;
}

.remove-btn {
    background: none;
    border: none;
    color: #e57373;
    cursor: pointer;
    font-size: 14px;
    margin-left: 15px;
    padding: 5px 10px;
    border-radius: 4px;
    transition: background-color 0.3s;
}

.remove-btn:hover {
    background-color: #ffebee;
}

.cart-summary {
    margin-top: 30px;
    background: var(--card-bg);
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
}

.total-sum {
    display: flex;
    justify-content: space-between;
    font-size: 20px;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: 20px;
}

.empty-cart {
    text-align: center;
    padding: 50px 0;
}

.empty-cart p {
    font-size: 18px;
    color: #666;
    margin-bottom: 20px;
}

#clear-cart {
    width: 100%;
    background-color: #f8d7da;
    color: #721c24;
    border: none;
}

#clear-cart:hover {
    background-color: #f5c6cb;
}</style>
        <div class="container">
            <h1>Ваша корзина</h1>
            
            <div id="cart-items" class="cart-items">
                <!-- Товары будут добавлены через JS -->
            </div>
            
            <div id="cart-total" class="cart-summary">
                <!-- Итоговая сумма -->
            </div>
            
            <div class="checkout-form" id="checkout-form">
                <h2>Оформление заказа</h2>
                <form id="order-form">
                    <div class="form-group">
                        <label for="name">ФИО:</label>
                        <input type="text" id="name" required placeholder="Иванов Иван Иванович">
                    </div>
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" id="email" required placeholder="example@mail.ru">
                    </div>
                    <div class="form-group">
                        <label for="phone">Телефон:</label>
                        <input type="tel" id="phone" required placeholder="+7 (999) 123-45-67">
                    </div>
                    <div class="form-group">
                        <label for="address">Адрес доставки:</label>
                        <textarea id="address" required placeholder="Город, улица, дом, квартира"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="comment">Комментарий к заказу:</label>
                        <textarea id="comment" placeholder="Особые пожелания"></textarea>
                    </div>
                    <button type="submit" class="checkout-btn">Оформить заказ</button>
                </form>
            </div>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Контакты</h3>
                    <p>Email: info@soapfantasy.ru</p>
                    <p>Телефон: +7 (123) 456-78-90</p>
                    <p>Адрес: г. Москва, ул. Мыльная, д. 1</p>
                </div>
                <div class="footer-section">
                    <h3>Меню</h3>
                    <a href="index.html">Главная</a>
                    <a href="products/all.html">Товары</a>
                    <a href="cart.html">Корзина</a>
                    <a href="orders.html">Мои заказы</a>
                </div>
                <div class="footer-section">
                    <h3>Соцсети</h3>
                    <div class="social-links">
                        <a href="#">Instagram</a>
                        <a href="#">VK</a>
                        <a href="#">Telegram</a>
                    </div>
                </div>
            </div>
            <p class="copyright">&copy; 2023 Мыльная фантазия. Все права защищены.</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // Функция рендеринга корзины
    function renderCart() {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        const cartItems = document.getElementById('cart-items');
        const cartTotal = document.getElementById('cart-total');
        
        if (cart.length === 0) {
            cartItems.innerHTML = `
                <div class="empty-cart">
                    <p>Ваша корзина пуста</p>
                    <a href="products/all.html" class="btn">Перейти к товарам</a>
                </div>
            `;
            cartTotal.innerHTML = '';
            return;
        }

        // Рендерим товары
        cartItems.innerHTML = cart.map(item => `
            <div class="cart-item" data-id="${item.id}">
                <div class="cart-item-image">
                    <img src="${item.image}" alt="${item.name}">
                </div>
                <div class="cart-item-info">
                    <h3 class="cart-item-title">${item.name}</h3>
                    <div class="cart-item-price">${item.price} ₽ × ${item.quantity} = ${item.price * item.quantity} ₽</div>
                    <div class="cart-item-actions">
                        <div class="quantity-control">
                            <button class="quantity-btn minus">-</button>
                            <span class="quantity-value">${item.quantity}</span>
                            <button class="quantity-btn plus">+</button>
                        </div>
                        <button class="btn remove-btn" data-id="${item.id}">Удалить</button>
                    </div>
                </div>
            </div>
        `).join('');

        // Считаем итого
        const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        cartTotal.innerHTML = `
            <div class="total-sum">
                <span>Итого:</span>
                <span>${total} ₽</span>
            </div>
            <button class="btn" id="clear-cart">Очистить корзину</button>
        `;

        // Добавляем обработчики
        addCartEventListeners();
    }

    // Функция добавления обработчиков событий
    function addCartEventListeners() {
        // Обработчики для кнопок "+" и "-"
        document.querySelectorAll('.quantity-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const itemId = this.closest('.cart-item').dataset.id;
                const cart = JSON.parse(localStorage.getItem('cart'));
                const item = cart.find(i => i.id === itemId);
                
                if (this.classList.contains('minus')) {
                    if (item.quantity > 1) {
                        item.quantity--;
                    } else {
                        // Если количество 1, то удаляем товар
                        cart.splice(cart.indexOf(item), 1);
                    }
                } else if (this.classList.contains('plus')) {
                    item.quantity++;
                }
                
                localStorage.setItem('cart', JSON.stringify(cart));
                renderCart();
                updateHeaderCartCount();
            });
        });

        // Обработчики для кнопок "Удалить"
        document.querySelectorAll('.remove-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const itemId = this.dataset.id;
                let cart = JSON.parse(localStorage.getItem('cart'));
                
                cart = cart.filter(item => item.id !== itemId);
                localStorage.setItem('cart', JSON.stringify(cart));
                
                renderCart();
                updateHeaderCartCount();
                showNotification('Товар удален из корзины');
            });
        });

        // Обработчик для очистки корзины
        const clearCartBtn = document.getElementById('clear-cart');
        if (clearCartBtn) {
            clearCartBtn.addEventListener('click', function() {
                localStorage.removeItem('cart');
                renderCart();
                updateHeaderCartCount();
                showNotification('Корзина очищена');
            });
        }
    }

    // Функция обновления счетчика в шапке
    function updateHeaderCartCount() {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        const count = cart.reduce((total, item) => total + item.quantity, 0);
        document.querySelectorAll('.cart-count').forEach(el => {
            el.textContent = count;
        });
    }

    // Функция показа уведомлений
    function showNotification(message) {
        const notification = document.createElement('div');
        notification.className = 'notification';
        notification.textContent = message;
        document.body.appendChild(notification);
        
        setTimeout(() => notification.classList.add('show'), 10);
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => notification.remove(), 300);
        }, 2000);
    }

    // Инициализация
    renderCart();
});
    </script>
</body>
</html>
